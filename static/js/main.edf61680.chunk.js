(this.webpackJsonpwhawhai=this.webpackJsonpwhawhai||[]).push([[0],{19:function(t,e,r){var a={"./avatar_dragon.svg":58,"./avatar_hackerman.svg":59,"./avatar_marvin.svg":60,"./avatar_tesla.svg":61,"./avatar_unicorn.svg":62};function n(t){var e=c(t);return r(e)}function c(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=c,t.exports=n,n.id=19},48:function(t,e,r){},49:function(t,e,r){},51:function(t,e,r){},58:function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/avatar_dragon.abfe7daa.svg"},59:function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/avatar_hackerman.5fd404b9.svg"},60:function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/avatar_marvin.5b39057d.svg"},61:function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/avatar_tesla.2421fbac.svg"},62:function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/avatar_unicorn.6d8eabe7.svg"},63:function(t,e,r){},64:function(t,e,r){},83:function(t,e,r){},84:function(t,e,r){},85:function(t,e,r){},86:function(t,e,r){},87:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r.n(a),c=r(37),s=r.n(c),i=(r(48),r(5)),o=(r(49),r(15)),d=r(4),l=r(12),u=r(3),j=r(43);var h,p=function(t,e){return{values:t,errors:Object.entries(t).reduce((function(t,e){var r=Object(i.a)(e,2);return function(t,e,r){return e&&"default"!==e?r:Object(u.a)(Object(u.a)({},r),{},Object(l.a)({},t,{type:"required",message:'The "'.concat(t,'" field is required')}))}(r[0],r[1],t)}),{})}},b={warriors:[{id:0,name:"Marvin",image:"avatar_marvin",attacks:["Depression #1","Depression #2","Depression #3"]},{id:1,name:"Dragon",image:"avatar_dragon",attacks:["Fire-Spitting","Dragon-Claw","Pound"]},{id:2,name:"Hackerman",image:"avatar_hackerman",attacks:["Cyber","System32 Error","Norton Antivirus"]},{id:3,name:"Tesla",image:"avatar_tesla",attacks:["Shaker-Machine","AC voltage","Radio Waves"]},{id:4,name:"Unicorn",image:"avatar_unicorn",attacks:["Rainbowshit","Candypuke","Cornlove"]}],selectedWarrior:0,warriorName:"",selectedAttacks:[]},m=Object(a.createContext)({state:b,dispatch:function(){}}),O=function(){return Object(a.useContext)(m)};!function(t){t[t.SelectWarrior=0]="SelectWarrior",t[t.SetCustomWarrior=1]="SetCustomWarrior",t[t.SetFullWarrior=2]="SetFullWarrior",t[t.ClearCustomWarrior=3]="ClearCustomWarrior"}(h||(h={}));r(51);var f=r(1);function v(t){var e,a,n,c;return t.warrior?Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"title-wrapper",children:Object(f.jsx)("h1",{children:"WhaWhai"})}),Object(f.jsxs)("form",{onSubmit:t.onSubmit,id:"fightForm",className:"form-wrapper",children:[Object(f.jsxs)("div",{className:"form-wrapper__basic-data",children:[Object(f.jsx)(o.b,{to:"/warriors",children:Object(f.jsx)("img",{src:r(19)("./".concat(t.warrior.image,".svg")).default,alt:t.warrior.name,width:"100",height:"100"})}),Object(f.jsx)("input",Object(u.a)(Object(u.a)({},t.register("warriorName")),{},{type:"text",placeholder:"$WARRIOR-NAME",autoComplete:"off"}))]}),(null===(e=t.errors)||void 0===e?void 0:e.warriorName)&&Object(f.jsx)("p",{className:"error-message",children:t.errors.warriorName.message}),Object(f.jsxs)("div",{className:"form-wrapper__select-data",children:[Object(f.jsxs)("select",Object(u.a)(Object(u.a)({className:"".concat(t.inputs.attack1?"attack-selected":""),id:"attack1"},t.register("attack1")),{},{onChange:t.handleOnChange,children:[Object(f.jsx)("option",{value:"",children:"Attack For Round #1"}),t.warrior.attacks.map((function(t,e){return Object(f.jsx)("option",{value:e,children:t},e)}))]})),Object(f.jsxs)("select",Object(u.a)(Object(u.a)({className:"".concat(t.inputs.attack2?"attack-selected":""),id:"attack2"},t.register("attack2")),{},{onChange:t.handleOnChange,children:[Object(f.jsx)("option",{value:"",children:"Attack For Round #2"}),t.warrior.attacks.map((function(t,e){return Object(f.jsx)("option",{value:e,children:t},e)}))]})),Object(f.jsxs)("select",Object(u.a)(Object(u.a)({className:"".concat(t.inputs.attack3?"attack-selected":""),id:"attack3"},t.register("attack3")),{},{onChange:t.handleOnChange,children:[",",Object(f.jsx)("option",{value:"",children:"Attack For Round #3"}),t.warrior.attacks.map((function(t,e){return Object(f.jsx)("option",{value:e,children:t},e)}))]})),(null===(a=t.errors)||void 0===a?void 0:a.attack1)&&Object(f.jsx)("p",{className:"error-message",children:t.errors.attack1.message}),(null===(n=t.errors)||void 0===n?void 0:n.attack2)&&Object(f.jsx)("p",{className:"error-message",children:t.errors.attack2.message}),(null===(c=t.errors)||void 0===c?void 0:c.attack3)&&Object(f.jsx)("p",{className:"error-message",children:t.errors.attack3.message})]}),Object(f.jsx)("button",{type:"submit",name:"startGame",id:"startGame",className:"btn btn-primary",children:"FIGHT!!!"})]})]}):Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"title-wrapper",children:[Object(f.jsx)("h1",{children:"WhaWhai"}),Object(f.jsx)("p",{children:"No default warrior"})]})})}function g(){var t=O(),e=t.state,r=t.dispatch,n=Object(d.f)(),c=Object(a.useState)(e.warriors.find((function(t){return t.id===e.selectedWarrior}))),s=Object(i.a)(c,1)[0],o=Object(j.a)({resolver:p}),b=o.register,m=o.handleSubmit,g=o.formState.errors,x=Object(a.useState)({attack1:!1,attack2:!1,attack3:!1}),w=Object(i.a)(x,2),k=w[0],N=w[1],W=m((function(t){var e,a;r((e=t.warriorName,a=[+t.attack1,+t.attack2,+t.attack3],{type:h.SetCustomWarrior,payload:{name:e,attacks:a}})),n.push("/fight")}));return Object(f.jsx)(v,{warrior:s,onSubmit:W,state:e,register:b,errors:g,inputs:k,handleOnChange:function(t){N(Object(u.a)(Object(u.a)({},k),{},Object(l.a)({},t.target.name,!!t.target.value)))}})}r(63);function x(t){return t.state.warriors?Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"title-wrapper",children:Object(f.jsxs)(o.b,{to:"/",children:[Object(f.jsx)("span",{className:"left-arrow"}),Object(f.jsx)("h1",{children:"TANGATA TOA"})]})}),Object(f.jsx)("div",{className:"warriors-wrapper",children:t.state.warriors.map((function(e,a){return e.id!==t.state.selectedWarrior?Object(f.jsx)("img",{src:r(19)("./".concat(e.image,".svg")).default,alt:e.name,title:e.name,width:"200",height:"200",onClick:function(){return t.setWarrior(e.id)}},a):null}))})]}):Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("p",{children:"No warriors in state!"})})}function w(){var t=O(),e=t.state,r=t.dispatch,a=Object(d.f)(),n=function(t){r({type:h.ClearCustomWarrior}),r(function(t){return{type:h.SelectWarrior,payload:{id:t}}}(t)),a.push("/")};return Object(f.jsx)(x,{state:e,setWarrior:function(t){return n(t)}})}var k,N={error:!1,message:null,code:null,reason:void 0,type:"info"},W=Object(a.createContext)({errorState:N,errorDispatch:function(){}}),S=function(){return Object(a.useContext)(W)};!function(t){t[t.SetError=0]="SetError",t[t.ClearError=1]="ClearError"}(k||(k={}));var A=function(t,e,r,a){return{type:k.SetError,payload:{message:t,code:e,reason:r,type:a}}},y=function(){return{type:k.ClearError}};r(64);function F(t){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"fight-name",children:Object(f.jsx)("h1",{children:"PAKIPAKI"})}),Object(f.jsxs)("div",{className:"fight-wrapper",children:[Object(f.jsxs)("div",{className:"fight-wrapper__item",children:[Object(f.jsx)("p",{children:t.state.warriorName}),Object(f.jsx)("img",{src:r(19)("./".concat(t.state.warriors[t.state.selectedWarrior].image,".svg")).default,alt:t.state.warriorName,width:"200",height:"200"})]}),Object(f.jsx)("div",{className:"fight-wrapper__item",children:Object(f.jsx)("h2",{children:"VS"})}),Object(f.jsxs)("div",{className:"fight-wrapper__item",children:[Object(f.jsx)("p",{children:"Unknown"}),Object(f.jsx)("img",{className:"unknown-image",src:"https://via.placeholder.com/200x200/FFFFFF/FFFF00?text=?",alt:"Unknown",width:"200",height:"200"})]})]})]})}var C=r(21),_=r.n(C);function E(){var t=O().state,e=S().errorDispatch,r=Object(a.useRef)(!1),n=Object(d.f)();return Object(a.useEffect)((function(){r.current=!0;var a={jsonrpc:"2.0",method:"Register",params:{application:{name:t.warriorName,warriorType:t.selectedWarrior,attacks:t.selectedAttacks}},id:"1"};return _.a.post("https://recruitment-test.ants.house/jsonrpc2/whawhai/v1",a).then((function(t){var r,a;if(null===(r=t.data)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.id)n.push("/fight/"+t.data.result.id);else if(t.data.error){var c,s;e(A(t.data.error.message,t.data.error.code,null===(c=t.data.error)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.reason,"error"))}})).catch((function(t){return console.log(t)})),function(){r.current=!1}}),[t.selectedAttacks,t.selectedWarrior,t.warriorName,e,n]),Object(f.jsx)(F,{state:t})}r(83);function T(t){return Object(f.jsx)("div",{onClick:"error"===t.errorState.type?t.resetError:t.closeModal,className:"backdrop ".concat(t.errorState.code?"backdrop-show":""),children:Object(f.jsx)("div",{className:"modal modal-show modal-".concat(t.errorState.type),children:Object(f.jsxs)("div",{className:"modal-content",children:[Object(f.jsxs)("div",{className:"modal-header",children:[Object(f.jsx)("h4",{children:t.errorState.type}),Object(f.jsx)("i",{onClick:"error"===t.errorState.type?t.resetError:t.closeModal,className:"close"})]}),Object(f.jsx)("div",{className:"modal-body",children:Object(f.jsx)("p",{children:t.errorState.reason?t.errorState.reason:t.errorState.message})})]})})})}function R(){var t=S(),e=t.errorState,r=t.errorDispatch,a=Object(d.f)();return Object(f.jsx)(T,{errorState:e,resetError:function(){r(y()),a.push("/")},closeModal:function(){r(y())}})}r(84);function I(t){return t.fightStatus<2?Object(f.jsx)(f.Fragment,{children:t.children}):Object(f.jsx)("div",{className:"\n      ".concat(t.totalWinner===t.character?"total-winner":"","\n      ").concat("draw"===t.totalWinner?"draw-game":""," "),children:t.children})}r(85);var D=r(98),P=Object(D.a)({txtGreen:{color:"#73ffa0"}});function G(t){var e=P();return""===t.totalWinner||t.fightStatus<2?Object(f.jsx)(f.Fragment,{}):"draw"===t.totalWinner?Object(f.jsx)("p",{children:"DRAWN"}):Object(f.jsx)("p",{className:e.txtGreen,children:t.character===t.totalWinner&&"WINNER"})}function U(t){var e,a;return Object(f.jsx)(f.Fragment,{children:t.fightStatus>=1?Object(f.jsx)("img",{src:r(19)("./".concat(t.state.warriors[(null===t||void 0===t||null===(e=t.opponent)||void 0===e?void 0:e.WarriorType)?t.opponent.WarriorType:0].image,".svg")).default,alt:(null===(a=t.opponent)||void 0===a?void 0:a.Name)?t.opponent.Name:"fail 1",width:"200",height:"200"}):Object(f.jsx)("img",{className:"unknown-image",src:"https://via.placeholder.com/200x200/FFFFFF/FFFF00?text=?",alt:"Unknown",width:"200",height:"200"})})}r(86);function M(t){var e,r=Object(a.useState)(0),n=Object(i.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){return 0===t.round.Warrior1Attack&&1===t.round.Warrior2Attack||1===t.round.Warrior1Attack&&2===t.round.Warrior2Attack||2===t.round.Warrior1Attack&&0===t.round.Warrior2Attack?s(2):1===t.round.Warrior1Attack&&0===t.round.Warrior2Attack||2===t.round.Warrior1Attack&&1===t.round.Warrior2Attack||0===t.round.Warrior1Attack&&2===t.round.Warrior2Attack?s(1):s(0),function(){}}),[t.round.Warrior1Attack,t.round.Warrior2Attack]),Object(f.jsxs)("p",{className:"single-round",children:[Object(f.jsxs)("span",{children:[t.num+1,". "]}),Object(f.jsx)("span",{className:"".concat(2===c?"round-lost":""),children:t.state.warriors[t.state.selectedWarrior].attacks[t.round.Warrior1Attack]}),Object(f.jsx)("span",{children:" - "}),Object(f.jsx)("span",{className:"".concat(1===c?"round-lost":""),children:t.state.warriors[(null===t||void 0===t||null===(e=t.opponent)||void 0===e?void 0:e.WarriorType)?t.opponent.WarriorType:0].attacks[t.round.Warrior2Attack]})]})}function H(t){var e;return Object(f.jsx)(f.Fragment,{children:(null===t||void 0===t||null===(e=t.fightRounds)||void 0===e?void 0:e.length)?Object(f.jsx)("div",{className:"fight-rounds",children:t.fightRounds.map((function(e,r){return Object(f.jsx)(M,{num:r,state:t.state,round:e,opponent:t.opponent},r)}))}):Object(f.jsx)(f.Fragment,{})})}function B(t){return Object(f.jsx)("div",{className:"flex-center",children:Object(f.jsxs)("button",{className:"btn btn-primary",onClick:1===t.fightStatus?t.chickenOut:t.tryAgain,children:[0===t.fightStatus&&"PANIC!!!",1===t.fightStatus&&"SURRENDER!!!",2===t.fightStatus&&"AGAIN!!!"]})})}function K(t){var e,a;return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"fight-name",children:Object(f.jsx)("h1",{children:"PAKIPAKI"})}),Object(f.jsxs)("div",{className:"fight-wrapper",children:[Object(f.jsxs)("div",{className:"fight-wrapper__item",children:[Object(f.jsx)("p",{children:t.state.warriorName}),Object(f.jsx)(I,{fightStatus:t.fightStatus,totalWinner:t.totalWinner,character:"host",children:Object(f.jsx)("img",{src:r(19)("./".concat(t.state.warriors[t.state.selectedWarrior?t.state.selectedWarrior:0].image,".svg")).default,alt:t.state.warriorName,width:"200",height:"200"})}),Object(f.jsx)(G,{fightStatus:t.fightStatus,totalWinner:t.totalWinner,character:"host"})]}),Object(f.jsx)("div",{className:"fight-wrapper__item",children:Object(f.jsx)("h2",{children:"VS"})}),Object(f.jsxs)("div",{className:"fight-wrapper__item",children:[Object(f.jsx)("p",{children:(null===t||void 0===t||null===(e=t.opponent)||void 0===e?void 0:e.Name)?t.opponent.Name:"Unknown"}),Object(f.jsx)(I,{fightStatus:t.fightStatus,totalWinner:t.totalWinner,character:"opponent",children:Object(f.jsx)(U,{fightStatus:t.fightStatus,opponent:t.opponent,state:t.state})}),Object(f.jsx)(G,{fightStatus:t.fightStatus,totalWinner:t.totalWinner,character:"opponent"})]})]}),t.fightStatus<1&&Object(f.jsx)("div",{className:"player-waiting",children:Object(f.jsx)("span",{children:"WAITING FOR 2ND PLAYER TO JOIN..."})}),"draw"!==t.totalWinner&&1===t.fightStatus&&Object(f.jsx)("div",{className:"player-waiting",children:Object(f.jsxs)("span",{children:["host"===t.totalWinner&&"BEATING THE SHIT OUT OF ".concat(null===(a=t.opponent)||void 0===a?void 0:a.Name),"opponent"===t.totalWinner&&"BEATING THE SHIT OUT OF ".concat(t.state.warriorName)]})}),Object(f.jsx)(H,{fightRounds:t.fightRounds,state:t.state,opponent:t.opponent}),Object(f.jsx)(B,{fightStatus:t.fightStatus,tryAgain:t.tryAgain,chickenOut:t.chickenOut})]})}function L(){var t=Object(d.f)(),e=Object(d.g)().id,r=O(),n=r.state,c=r.dispatch,s=S().errorDispatch,o=Object(a.useState)(0),l=Object(i.a)(o,2),j=l[0],p=l[1],b=Object(a.useState)(void 0),m=Object(i.a)(b,2),v=m[0],g=m[1],x=Object(a.useState)([]),w=Object(i.a)(x,2),k=w[0],N=w[1],W=Object(a.useRef)(!1),y=Object(a.useState)(""),F=Object(i.a)(y,2),C=F[0],E=F[1];return Object(a.useEffect)((function(){if(!n.warriorName){var t={jsonrpc:"2.0",id:"1",method:"Status",params:{id:e}};_.a.post("https://recruitment-test.ants.house/jsonrpc2/whawhai/v1",t).then((function(t){var e,r,a,n,i;t.data.error?s(A(t.data.error.message,t.data.error.code,null===(e=t.data.error)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.reason,"error")):t.data.result.fight.Warrior1&&c((a=t.data.result.fight.Warrior1.Name,n=t.data.result.fight.Warrior1.WarriorType,i=t.data.result.fight.Warrior1.Attacks,{type:h.SetFullWarrior,payload:{Name:a,WarriorType:n,Attacks:i}}))})).catch((function(t){return console.log(t)}))}return function(){}}),[n.warriorName,c,s,e]),Object(a.useEffect)((function(){W.current=!0;var t={jsonrpc:"2.0",id:"1",method:"Status",params:{id:e}};return function e(){_.a.post("https://recruitment-test.ants.house/jsonrpc2/whawhai/v1",t).then((function(t){var r,a;t.data.error?s(A(t.data.error.message,t.data.error.code,null===(r=t.data.error)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.reason,"error")):1===+t.data.result.fight.Status&&W.current?(g(Object(u.a)({},t.data.result.fight.Warrior2)),p(1),e()):2===+t.data.result.fight.Status&&W.current?(N(t.data.result.fight.Rounds),g(Object(u.a)({},t.data.result.fight.Warrior2)),p(2)):+t.data.result.fight.Status<2&&W.current?e():console.log(t,"Something unpredicted happened!")})).catch((function(t){return console.log(t)}))}(),function(){W.current=!1}}),[s,e]),Object(a.useEffect)((function(){if(j>=1&&""===C){var t=0,e=0,r=n.selectedAttacks,a=null===v||void 0===v?void 0:v.Attacks;if(a&&r)for(var c=0;c<r.length;c++)0===r[c]&&1===a[c]||1===r[c]&&2===a[c]||2===r[c]&&0===a[c]?e+=1:(1===r[c]&&0===a[c]||2===r[c]&&1===a[c]||0===r[c]&&2===a[c])&&(t+=1);E(t>e?"host":e>t?"opponent":"draw")}return function(){}}),[j,C,null===v||void 0===v?void 0:v.Attacks,n.selectedAttacks]),Object(f.jsx)(K,{state:n,fightStatus:j,opponent:v,fightRounds:k,totalWinner:C,tryAgain:function(){t.push("/")},chickenOut:function(){s(A("Too late to chicken out",420,"You can't quit now","info"))}})}var q=r(7);function J(t,e){switch(e.type){case h.SelectWarrior:return Object(u.a)(Object(u.a)({},t),{},{selectedWarrior:e.payload.id});case h.SetCustomWarrior:return Object(u.a)(Object(u.a)({},t),{},{warriorName:e.payload.name,selectedAttacks:Object(q.a)(e.payload.attacks)});case h.SetFullWarrior:return Object(u.a)(Object(u.a)({},t),{},{warriorName:e.payload.Name,selectedAttacks:e.payload.Attacks});case h.ClearCustomWarrior:return Object(u.a)(Object(u.a)({},t),{},{warriorName:"",selectedAttacks:[]});default:return t}}function V(t,e){switch(e.type){case k.SetError:return Object(u.a)(Object(u.a)({},t),{},{error:!0,message:e.payload.message,code:e.payload.code,reason:e.payload.reason,type:e.payload.type});case k.ClearError:return Object(u.a)(Object(u.a)({},t),{},{error:!1,message:"",code:0,reason:void 0});default:return t}}var Y=function(){var t=Object(a.useReducer)(V,N),e=Object(i.a)(t,2),r=e[0],n=e[1],c=Object(a.useReducer)(J,b),s=Object(i.a)(c,2),l=s[0],u=s[1];return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(o.a,{children:Object(f.jsx)(W.Provider,{value:{errorState:r,errorDispatch:n},children:Object(f.jsxs)(m.Provider,{value:{state:l,dispatch:u},children:[Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"/",exact:!0,component:g}),Object(f.jsx)(d.a,{path:"/warriors",component:w}),Object(f.jsx)(d.a,{path:"/fight/:id",component:L}),Object(f.jsx)(d.a,{path:"/fight",component:E}),Object(f.jsx)(d.a,{path:"*",component:g})]}),Object(f.jsx)(R,{})]})})})})},$=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,99)).then((function(e){var r=e.getCLS,a=e.getFID,n=e.getFCP,c=e.getLCP,s=e.getTTFB;r(t),a(t),n(t),c(t),s(t)}))};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(Y,{})}),document.getElementById("root")),$()}},[[87,1,2]]]);
//# sourceMappingURL=main.edf61680.chunk.js.map